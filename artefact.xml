<?xml version="1.0"?><artefact xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="artefact.xsd" name="Animated Raffle Winner" slug="animated-raffle-winner" type="code-package" schemaVersion="2">
  <file path="readme.txt">
    <description>This file contains the readme information for the block. It is used to provide information about the block, its usage, and any other relevant details.</description>
    <content><![CDATA[
=== Animated Raffle Winner ===

Contributors:      WordPress Telex, RafaelFunchal
Tags:              block, raffle, random, lottery, animation
Tested up to:      6.8
Stable tag:        0.1.0
License:           GPLv2 or later
License URI:       https://www.gnu.org/licenses/gpl-2.0.html

An interactive block to create animated raffles with random numbers and celebratory fireworks.

== Description ==

The Animated Raffle Winner block allows you to create engaging raffle experiences on your WordPress site. With smooth animations and exciting visual effects, this block is perfect for promotions, events, contests, and any situation that requires random number selection.

**Key Features:**

* Set a custom number range (start and end)
* Number rolling animation for 5 seconds before revealing the result
* Highlighted display of the drawn number
* Animated fireworks to celebrate the result
* Simple and intuitive interface
* Fully responsive

**How to Use:**

1. Add the "Animated Raffle Winner" block to your content
2. Configure the starting number in the settings panel
3. Configure the ending number in the settings panel
4. Publish or preview the page
5. Click the "Draw" button to start the raffle!

The block is perfect for:
- Raffles at events and promotions
- Random selection of participants
- Games and interactive activities
- Educational demonstrations about randomness
- Any application that needs random selection with visual impact

== Installation ==

1. Upload the plugin files to the `/wp-content/plugins/animated-raffle-winner` directory or install directly through the WordPress plugins screen
2. Activate the plugin through the 'Plugins' screen in WordPress
3. Add the "Animated Raffle Winner" block to any page or post using the Gutenberg editor

== Frequently Asked Questions ==

= How do I configure the number range? =

In the block editor, select the Animated Raffle Winner block. In the right sidebar (Inspector), you will see two fields: "Starting Number" and "Ending Number". Enter the desired values.

= Can I use negative numbers? =

Yes! The block accepts any integer, including negative numbers.

= Does the animation work on mobile devices? =

Yes, the block is fully responsive and works perfectly on smartphones and tablets.

= Can I customize the animation duration? =

Currently, the animation has a fixed duration of 5 seconds to provide a consistent and exciting experience.

= Is the raffle truly random? =

Yes, we use JavaScript's Math.random() function, which generates pseudo-random numbers suitable for most raffle applications.

== Screenshots ==

1. Block in the editor showing the range settings
2. Initial state of the block on the frontend before the raffle
3. Animation in progress with numbers rolling
4. Raffle result with large number and fireworks

== Changelog ==

= 0.1.0 =
* Initial release
* Raffle with configurable range
* 5-second animation
* Celebratory fireworks
* Responsive interface

== Upgrade Notice ==

= 0.1.0 =
First version of Animated Raffle Winner. Install to start creating interactive raffles!
]]></content>
  </file>
  <file path="animated-raffle-winner.php">
    <description>This file contains the block registration code in the form of a single block plugin.</description>
    <content><![CDATA[<?php
/**
 * Plugin Name:       Animated Raffle Winner
 * Description:       An interactive block to create animated raffles with random numbers and celebratory fireworks.
 * Version:           0.1.0
 * Requires at least: 6.1
 * Requires PHP:      7.0
 * Author:            RafaelFunchal, WordPress Telex
 * License:           GPLv2 or later
 * License URI:       https://www.gnu.org/licenses/gpl-2.0.html
 * Text Domain:       animated-raffle-winner
 *
 * @package AnimatedRaffleWinner
 */

if ( ! defined( 'ABSPATH' ) ) {
	exit;
}

/**
 * Registers the block using the metadata loaded from the `block.json` file.
 * Behind the scenes, it registers also all assets so they can be enqueued
 * through the block editor in the corresponding context.
 *
 * @see https://developer.wordpress.org/reference/functions/register_block_type/
 */
function animated_raffle_winner_block_init() {
	register_block_type( __DIR__ . '/build/' );
}
add_action( 'init', 'animated_raffle_winner_block_init' );
]]></content>
  </file>
  <file path="src/block.json">
    <description>This file contains metadata about the block including its name, title, category, icon, and other properties.</description>
    <content><![CDATA[{
	"$schema": "https://schemas.wp.org/trunk/block.json",
	"apiVersion": 3,
	"name": "telex/animated-raffle-winner",
	"version": "0.1.0",
	"title": "Animated Raffle Winner",
	"category": "widgets",
	"icon": "randomize",
	"description": "Create interactive raffles with number animation and fireworks",
	"example": {
		"attributes": {
			"startingNumber": 1,
			"endingNumber": 100,
			"raffleDuration": 5,
			"fullscreen": false,
			"animationType": "fireworks"
		}
	},
	"attributes": {
		"startingNumber": {
			"type": "number",
			"default": 1
		},
		"endingNumber": {
			"type": "number",
			"default": 100
		},
		"raffleDuration": {
			"type": "number",
			"default": 5
		},
		"fullscreen": {
			"type": "boolean",
			"default": false
		},
		"animationType": {
			"type": "string",
			"default": "fireworks"
		}
	},
	"supports": {
		"html": false,
		"align": ["wide", "full"]
	},
	"textdomain": "animated-raffle-winner",
	"editorScript": "file:./index.js",
	"editorStyle": "file:./index.css",
	"style": "file:./style-index.css",
	"viewScript": "file:./view.js"
}
]]></content>
  </file>
  <file path="src/index.js">
    <description>This file registers the block, specifies the edit and save functions, and loads the block's metadata</description>
    <content><![CDATA[/**
 * Registers a new block provided a unique name and an object defining its behavior.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/
 */
import { registerBlockType } from '@wordpress/blocks';

/**
 * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.
 * All files containing `style` keyword are bundled together. The code used
 * gets applied both to the front of your site and to the editor.
 *
 * @see https://www.npmjs.com/package/@wordpress/scripts#using-css
 */
import './style.scss';

/**
 * Internal dependencies
 */
import Edit from './edit';
import save from './save';
import metadata from './block.json';

/**
 * Every block starts by registering a new block type definition.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/
 */
registerBlockType( metadata.name, {
	/**
	 * @see ./edit.js
	 */
	edit: Edit,

	/**
	 * @see ./save.js
	 */
	save,
} );
]]></content>
  </file>
  <file path="src/edit.js">
    <description>This file contains the edit function for the block which is responsible for rendering the block in the editor.</description>
    <content><![CDATA[/**
 * Retrieves the translation of text.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/packages/packages-i18n/
 */
import { __ } from '@wordpress/i18n';

/**
 * React hook that is used to mark the block wrapper element.
 * It provides all the necessary props like the class name.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/packages/packages-block-editor/#useblockprops
 */
import { useBlockProps, InspectorControls } from '@wordpress/block-editor';

/**
 * WordPress components
 */
import { PanelBody, TextControl, RangeControl, ToggleControl, SelectControl } from '@wordpress/components';

/**
 * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.
 * Those files can contain any CSS code that gets applied to the editor.
 *
 * @see https://www.npmjs.com/package/@wordpress/scripts#using-css
 */
import './editor.scss';

/**
 * The edit function describes the structure of your block in the context of the
 * editor. This represents what the editor will render when the block is used.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/#edit
 *
 * @return {Element} Element to render.
 */
export default function Edit( { attributes, setAttributes } ) {
	const { startingNumber, endingNumber, raffleDuration, fullscreen, animationType } = attributes;

	const blockProps = useBlockProps( {
		className: 'animated-raffle-winner-block',
	} );

	const animationOptions = [
		{ label: __( 'Fireworks', 'animated-raffle-winner' ), value: 'fireworks' },
		{ label: __( 'Confetti', 'animated-raffle-winner' ), value: 'confetti' },
		{ label: __( 'Stars', 'animated-raffle-winner' ), value: 'stars' },
		{ label: __( 'Balloons', 'animated-raffle-winner' ), value: 'balloons' },
	];

	return (
		<>
			<InspectorControls>
				<PanelBody title={ __( 'Raffle Settings', 'animated-raffle-winner' ) }>
					<TextControl
						label={ __( 'Starting Number', 'animated-raffle-winner' ) }
						type="number"
						value={ startingNumber }
						onChange={ ( value ) =>
							setAttributes( { startingNumber: parseInt( value ) || 1 } )
						}
						help={ __( 'The lowest number in the range', 'animated-raffle-winner' ) }
					/>
					<TextControl
						label={ __( 'Ending Number', 'animated-raffle-winner' ) }
						type="number"
						value={ endingNumber }
						onChange={ ( value ) =>
							setAttributes( { endingNumber: parseInt( value ) || 100 } )
						}
						help={ __( 'The highest number in the range', 'animated-raffle-winner' ) }
					/>
					<RangeControl
						label={ __( 'Raffle Duration (seconds)', 'animated-raffle-winner' ) }
						value={ raffleDuration }
						onChange={ ( value ) =>
							setAttributes( { raffleDuration: value } )
						}
						min={ 1 }
						max={ 15 }
						step={ 1 }
						help={ __( 'Duration of the animation before revealing the result', 'animated-raffle-winner' ) }
					/>
				</PanelBody>
				<PanelBody title={ __( 'Display Settings', 'animated-raffle-winner' ) } initialOpen={ false }>
					<ToggleControl
						label={ __( 'Open in Fullscreen', 'animated-raffle-winner' ) }
						checked={ fullscreen }
						onChange={ ( value ) =>
							setAttributes( { fullscreen: value } )
						}
						help={ __( 'When enabled, the raffle will occupy the entire screen during the animation', 'animated-raffle-winner' ) }
					/>
					<SelectControl
						label={ __( 'Celebration Animation Type', 'animated-raffle-winner' ) }
						value={ animationType }
						options={ animationOptions }
						onChange={ ( value ) =>
							setAttributes( { animationType: value } )
						}
						help={ __( 'Choose the celebration style after revealing the result', 'animated-raffle-winner' ) }
					/>
				</PanelBody>
			</InspectorControls>

			<div { ...blockProps }>
				<div className="raffle-container">
					<p className="raffle-message">
						{ __( 'Raffling between', 'animated-raffle-winner' ) }{ ' ' }
						<strong>{ startingNumber }</strong> { __( 'and', 'animated-raffle-winner' ) }{ ' ' }
						<strong>{ endingNumber }</strong>
					</p>
					<button className="raffle-button" disabled>
						{ __( 'Draw', 'animated-raffle-winner' ) }
					</button>
					<div className="raffle-preview">
						<span className="number-preview">?</span>
					</div>
					<div className="raffle-config-info">
						<p className="raffle-info">
							{ __( 'Duration:', 'animated-raffle-winner' ) } <strong>{ raffleDuration }s</strong>
						</p>
						<p className="raffle-info">
							{ __( 'Fullscreen:', 'animated-raffle-winner' ) } <strong>{ fullscreen ? __( 'Yes', 'animated-raffle-winner' ) : __( 'No', 'animated-raffle-winner' ) }</strong>
						</p>
						<p className="raffle-info">
							{ __( 'Animation:', 'animated-raffle-winner' ) } <strong>{ animationOptions.find( opt => opt.value === animationType )?.label }</strong>
						</p>
					</div>
				</div>
			</div>
		</>
	);
}
]]></content>
  </file>
  <file path="src/save.js">
    <description>This file contains the save function for the block which is responsible for creating the static result of rendering the block on the client to display the saved result on the front end.</description>
    <content><![CDATA[/**
 * React hook that is used to mark the block wrapper element.
 * It provides all the necessary props like the class name.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/packages/packages-block-editor/#useblockprops
 */
import { useBlockProps } from '@wordpress/block-editor';

/**
 * The save function defines the way in which the different attributes should
 * be combined into the final markup, which is then serialized by the block
 * editor into `post_content`.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/#save
 *
 * @return {Element} Element to render.
 */
export default function save( { attributes } ) {
	const { startingNumber, endingNumber, raffleDuration, fullscreen, animationType } = attributes;

	const blockProps = useBlockProps.save( {
		className: 'animated-raffle-winner-block',
	} );

	return (
		<div { ...blockProps }>
			<div
				className="raffle-container"
				data-starting-number={ startingNumber }
				data-ending-number={ endingNumber }
				data-raffle-duration={ raffleDuration }
				data-fullscreen={ fullscreen }
				data-animation-type={ animationType }
			>
				<p className="raffle-message">
					Raffling between <strong>{ startingNumber }</strong> and{ ' ' }
					<strong>{ endingNumber }</strong>
				</p>
				<button className="raffle-button">Draw</button>
				<div className="raffle-result">
					<span className="number-result"></span>
				</div>
				<canvas className="celebration-canvas"></canvas>
			</div>
		</div>
	);
}
]]></content>
  </file>
  <file path="src/style.scss">
    <description>This file contains styles for the block in the front end.</description>
    <content><![CDATA[/**
 * The following styles get applied both on the front of your site
 * and in the editor.
 *
 * Replace them with your own styles or remove the file completely.
 */

.animated-raffle-winner-block {
	margin: 2rem 0;

	.raffle-container {
		position: relative;
		text-align: center;
		padding: 3rem 2rem;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		border-radius: 20px;
		box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
		overflow: hidden;
		transition: all 0.3s ease;

		&.fullscreen-active {
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			z-index: 9999;
			border-radius: 0;
			margin: 0;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
		}
	}

	.raffle-message {
		color: #fff;
		font-size: 1.5rem;
		margin-bottom: 2rem;
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);

		strong {
			font-size: 1.8rem;
			color: #ffd700;
		}
	}

	.raffle-button {
		background: #ffd700;
		color: #333;
		border: none;
		padding: 1rem 3rem;
		font-size: 1.5rem;
		font-weight: bold;
		border-radius: 50px;
		cursor: pointer;
		transition: all 0.3s ease;
		box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
		text-transform: uppercase;
		letter-spacing: 1px;

		&:hover {
			background: #ffed4e;
			transform: translateY(-2px);
			box-shadow: 0 7px 20px rgba(0, 0, 0, 0.4);
		}

		&:active {
			transform: translateY(0);
		}

		&:disabled {
			opacity: 0.6;
			cursor: not-allowed;
		}

		&.drawing {
			background: #ccc;
			cursor: wait;
		}
	}

	.raffle-result {
		margin-top: 2rem;
		min-height: 150px;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.number-result {
		display: inline-block;
		font-size: 6rem;
		font-weight: bold;
		color: #ffd700;
		text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
		opacity: 0;
		transform: scale(0);
		transition: all 0.5s ease;

		&.rolling {
			opacity: 1;
			transform: scale(1);
			font-size: 4rem;
			animation: roll 0.1s linear infinite;
		}

		&.revealed {
			opacity: 1;
			transform: scale(1);
			animation: reveal 0.8s ease-out;
		}
	}

	.raffle-preview {
		margin-top: 2rem;
		min-height: 150px;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.number-preview {
		font-size: 6rem;
		font-weight: bold;
		color: rgba(255, 255, 255, 0.3);
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
	}

	.raffle-config-info {
		margin-top: 1.5rem;
		display: flex;
		flex-wrap: wrap;
		justify-content: center;
		gap: 1rem;
	}

	.raffle-info {
		margin: 0;
		padding: 0.5rem 1rem;
		color: rgba(255, 255, 255, 0.8);
		font-size: 1rem;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
		background: rgba(0, 0, 0, 0.2);
		border-radius: 10px;

		strong {
			color: #ffd700;
			font-size: 1.1rem;
		}
	}

	.celebration-canvas {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		pointer-events: none;
		opacity: 0;
		transition: opacity 0.3s ease;

		&.active {
			opacity: 1;
		}
	}
}

@keyframes roll {
	0% {
		transform: scale(1) rotateX(0deg);
	}
	100% {
		transform: scale(1) rotateX(360deg);
	}
}

@keyframes reveal {
	0% {
		transform: scale(0) rotate(-180deg);
		opacity: 0;
	}
	50% {
		transform: scale(1.2) rotate(10deg);
	}
	100% {
		transform: scale(1) rotate(0deg);
		opacity: 1;
	}
}

/* Responsive */
@media (max-width: 768px) {
	.animated-raffle-winner-block {
		.raffle-message {
			font-size: 1.2rem;

			strong {
				font-size: 1.5rem;
			}
		}

		.raffle-button {
			font-size: 1.2rem;
			padding: 0.8rem 2rem;
		}

		.number-result {
			font-size: 4rem;

			&.rolling {
				font-size: 3rem;
			}
		}

		.number-preview {
			font-size: 4rem;
		}

		.raffle-info {
			font-size: 0.9rem;

			strong {
				font-size: 1rem;
			}
		}

		.raffle-config-info {
			flex-direction: column;
			align-items: center;
		}
	}
}
]]></content>
  </file>
  <file path="src/editor.scss">
    <description>This file contains styles for the block in the editor.</description>
    <content><![CDATA[/**
 * The following styles get applied inside the editor only.
 *
 * Replace them with your own styles or remove the file completely.
 */

.animated-raffle-winner-block {
	.raffle-button {
		&:disabled {
			cursor: not-allowed;
			opacity: 0.7;
		}
	}

	.raffle-preview {
		margin-top: 2rem;
	}
}
]]></content>
  </file>
  <file path="src/view.js">
    <description>This file contains the view function for the block which is responsible for rendering interactive behaviors of the block on the front end.</description>
    <content><![CDATA[/**
 * Use this file for JavaScript code that you want to run in the front-end
 * on posts/pages that contain this block.
 */

class AnimatedRaffleWinner {
	constructor( container ) {
		this.container = container;
		this.button = container.querySelector( '.raffle-button' );
		this.numberElement = container.querySelector( '.number-result' );
		this.canvas = container.querySelector( '.celebration-canvas' );
		this.ctx = this.canvas ? this.canvas.getContext( '2d' ) : null;

		this.startingNumber = parseInt(
			container.getAttribute( 'data-starting-number' ) || '1'
		);
		this.endingNumber = parseInt(
			container.getAttribute( 'data-ending-number' ) || '100'
		);
		this.raffleDuration = parseInt(
			container.getAttribute( 'data-raffle-duration' ) || '5'
		);
		this.fullscreen = container.getAttribute( 'data-fullscreen' ) === 'true';
		this.animationType = container.getAttribute( 'data-animation-type' ) || 'fireworks';

		this.particles = [];
		this.animationFrame = null;
		this.celebrationActive = false;
		this.keydownHandler = null;

		this.init();
	}

	init() {
		if ( this.button ) {
			this.button.addEventListener( 'click', () => this.startRaffle() );
		}

		if ( this.canvas ) {
			this.resizeCanvas();
			window.addEventListener( 'resize', () => this.resizeCanvas() );
		}
	}

	resizeCanvas() {
		if ( ! this.canvas ) {
			return;
		}
		this.canvas.width = this.container.offsetWidth;
		this.canvas.height = this.container.offsetHeight;
	}

	startRaffle() {
		if ( ! this.numberElement || ! this.button ) {
			return;
		}

		// Stop previous celebration if active
		this.stopCelebration();

		if ( this.fullscreen ) {
			this.container.classList.add( 'fullscreen-active' );
			this.resizeCanvas();
		}

		this.button.disabled = true;
		this.button.classList.add( 'drawing' );
		this.numberElement.classList.remove( 'revealed' );
		this.numberElement.classList.add( 'rolling' );

		const duration = this.raffleDuration * 1000;
		const interval = 100;
		const iterations = duration / interval;
		let counter = 0;

		const animation = setInterval( () => {
			const randomNumber =
				Math.floor(
					Math.random() * ( this.endingNumber - this.startingNumber + 1 )
				) + this.startingNumber;
			this.numberElement.textContent = randomNumber;

			counter++;
			if ( counter >= iterations ) {
				clearInterval( animation );
				this.revealResult();
			}
		}, interval );
	}

	revealResult() {
		const finalNumber =
			Math.floor(
				Math.random() * ( this.endingNumber - this.startingNumber + 1 )
			) + this.startingNumber;

		this.numberElement.textContent = finalNumber;
		this.numberElement.classList.remove( 'rolling' );
		this.numberElement.classList.add( 'revealed' );

		if ( this.button ) {
			this.button.disabled = false;
			this.button.classList.remove( 'drawing' );
		}

		this.startCelebration();
		this.addKeyListener();
	}

	addKeyListener() {
		// Remove previous listener if exists
		if ( this.keydownHandler ) {
			document.removeEventListener( 'keydown', this.keydownHandler );
		}

		// Create new listener
		this.keydownHandler = ( e ) => {
			if ( this.celebrationActive ) {
				e.preventDefault();
				this.stopCelebration();
				if ( this.fullscreen && this.container.classList.contains( 'fullscreen-active' ) ) {
					this.container.classList.remove( 'fullscreen-active' );
					this.resizeCanvas();
				}
				document.removeEventListener( 'keydown', this.keydownHandler );
				this.keydownHandler = null;
			}
		};

		document.addEventListener( 'keydown', this.keydownHandler );
	}

	stopCelebration() {
		if ( this.animationFrame ) {
			cancelAnimationFrame( this.animationFrame );
			this.animationFrame = null;
		}
		this.celebrationActive = false;
		this.particles = [];
		if ( this.canvas && this.ctx ) {
			this.ctx.clearRect( 0, 0, this.canvas.width, this.canvas.height );
			this.canvas.classList.remove( 'active' );
		}
	}

	startCelebration() {
		if ( ! this.canvas || ! this.ctx ) {
			return;
		}

		this.canvas.classList.add( 'active' );
		this.particles = [];
		this.celebrationActive = true;

		const animate = () => {
			if ( ! this.celebrationActive ) {
				return;
			}

			this.ctx.clearRect( 0, 0, this.canvas.width, this.canvas.height );

			switch ( this.animationType ) {
				case 'fireworks':
					if ( Math.random() < 0.1 ) {
						this.createFirework();
					}
					break;
				case 'confetti':
					if ( Math.random() < 0.3 ) {
						this.createConfetti();
					}
					break;
				case 'stars':
					if ( Math.random() < 0.2 ) {
						this.createStar();
					}
					break;
				case 'balloons':
					if ( Math.random() < 0.15 ) {
						this.createBalloon();
					}
					break;
			}

			this.updateParticles();
			this.drawParticles();

			this.animationFrame = requestAnimationFrame( animate );
		};

		animate();
	}

	createFirework() {
		const x = Math.random() * this.canvas.width;
		const y = Math.random() * ( this.canvas.height * 0.5 );
		const color = `hsl(${ Math.random() * 360 }, 100%, 60%)`;
		const particleCount = 50;

		for ( let i = 0; i < particleCount; i++ ) {
			const angle = ( Math.PI * 2 * i ) / particleCount;
			const velocity = 2 + Math.random() * 3;

			this.particles.push( {
				type: 'firework',
				x,
				y,
				vx: Math.cos( angle ) * velocity,
				vy: Math.sin( angle ) * velocity,
				color,
				life: 1,
				size: 2 + Math.random() * 3,
			} );
		}
	}

	createConfetti() {
		const x = Math.random() * this.canvas.width;
		const y = -20;
		const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#a8dadc', '#f1faee'];
		const color = colors[ Math.floor( Math.random() * colors.length ) ];

		this.particles.push( {
			type: 'confetti',
			x,
			y,
			vx: ( Math.random() - 0.5 ) * 2,
			vy: Math.random() * 2 + 1,
			rotation: Math.random() * 360,
			rotationSpeed: ( Math.random() - 0.5 ) * 10,
			color,
			life: 1,
			size: 5 + Math.random() * 5,
			shape: Math.random() > 0.5 ? 'square' : 'rectangle',
		} );
	}

	createStar() {
		const x = Math.random() * this.canvas.width;
		const y = Math.random() * this.canvas.height;
		const color = '#ffd700';

		this.particles.push( {
			type: 'star',
			x,
			y,
			vx: 0,
			vy: 0,
			scale: 0,
			color,
			life: 1,
			size: 20 + Math.random() * 20,
			points: 5,
		} );
	}

	createBalloon() {
		const x = Math.random() * this.canvas.width;
		const y = this.canvas.height + 50;
		const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#a8dadc', '#f1faee'];
		const color = colors[ Math.floor( Math.random() * colors.length ) ];

		this.particles.push( {
			type: 'balloon',
			x,
			y,
			vx: ( Math.random() - 0.5 ) * 0.5,
			vy: -( 1 + Math.random() * 1 ),
			oscillation: Math.random() * Math.PI * 2,
			color,
			life: 1,
			size: 20 + Math.random() * 15,
		} );
	}

	updateParticles() {
		this.particles = this.particles.filter( ( p ) => {
			switch ( p.type ) {
				case 'firework':
					p.x += p.vx;
					p.y += p.vy;
					p.vy += 0.1;
					p.life -= 0.01;
					break;

				case 'confetti':
					p.x += p.vx;
					p.y += p.vy;
					p.rotation += p.rotationSpeed;
					p.vy += 0.1;
					if ( p.y > this.canvas.height ) {
						p.life = 0;
					}
					break;

				case 'star':
					if ( p.scale < 1 ) {
						p.scale += 0.05;
					} else {
						p.life -= 0.02;
					}
					break;

				case 'balloon':
					p.x += p.vx + Math.sin( p.oscillation ) * 0.5;
					p.y += p.vy;
					p.oscillation += 0.1;
					if ( p.y < -50 ) {
						p.life = 0;
					}
					break;
			}

			return p.life > 0;
		} );
	}

	drawParticles() {
		this.particles.forEach( ( p ) => {
			this.ctx.save();
			this.ctx.globalAlpha = p.life;

			switch ( p.type ) {
				case 'firework':
					this.ctx.fillStyle = p.color;
					this.ctx.beginPath();
					this.ctx.arc( p.x, p.y, p.size, 0, Math.PI * 2 );
					this.ctx.fill();
					break;

				case 'confetti':
					this.ctx.translate( p.x, p.y );
					this.ctx.rotate( ( p.rotation * Math.PI ) / 180 );
					this.ctx.fillStyle = p.color;
					if ( p.shape === 'square' ) {
						this.ctx.fillRect( -p.size / 2, -p.size / 2, p.size, p.size );
					} else {
						this.ctx.fillRect( -p.size / 2, -p.size / 4, p.size, p.size / 2 );
					}
					break;

				case 'star':
					this.ctx.translate( p.x, p.y );
					this.ctx.scale( p.scale, p.scale );
					this.drawStar( 0, 0, p.points, p.size, p.size / 2, p.color );
					break;

				case 'balloon':
					this.drawBalloon( p.x, p.y, p.size, p.color );
					break;
			}

			this.ctx.restore();
		} );
	}

	drawStar( cx, cy, points, outerRadius, innerRadius, color ) {
		this.ctx.fillStyle = color;
		this.ctx.strokeStyle = color;
		this.ctx.lineWidth = 2;
		this.ctx.beginPath();

		for ( let i = 0; i < points * 2; i++ ) {
			const radius = i % 2 === 0 ? outerRadius : innerRadius;
			const angle = ( Math.PI * i ) / points - Math.PI / 2;
			const x = cx + Math.cos( angle ) * radius;
			const y = cy + Math.sin( angle ) * radius;

			if ( i === 0 ) {
				this.ctx.moveTo( x, y );
			} else {
				this.ctx.lineTo( x, y );
			}
		}

		this.ctx.closePath();
		this.ctx.fill();
		this.ctx.stroke();
	}

	drawBalloon( x, y, size, color ) {
		this.ctx.fillStyle = color;
		this.ctx.beginPath();
		this.ctx.ellipse( x, y, size * 0.6, size, 0, 0, Math.PI * 2 );
		this.ctx.fill();

		this.ctx.strokeStyle = color;
		this.ctx.lineWidth = 2;
		this.ctx.beginPath();
		this.ctx.moveTo( x, y + size );
		this.ctx.quadraticCurveTo( x + 5, y + size + 10, x, y + size + 20 );
		this.ctx.stroke();

		this.ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
		this.ctx.beginPath();
		this.ctx.ellipse( x - size * 0.2, y - size * 0.3, size * 0.15, size * 0.25, -0.3, 0, Math.PI * 2 );
		this.ctx.fill();
	}
}

document.addEventListener( 'DOMContentLoaded', () => {
	const containers = document.querySelectorAll( '.raffle-container' );
	containers.forEach( ( container ) => {
		new AnimatedRaffleWinner( container );
	} );
} );]]></content>
  </file>
</artefact>